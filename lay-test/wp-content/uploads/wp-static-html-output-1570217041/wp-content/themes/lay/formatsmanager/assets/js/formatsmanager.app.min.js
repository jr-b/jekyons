!function(e){var t={};function o(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=t,o.d=function(e,t,i){o.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},o.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=0)}([function(e,t,o){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}o.r(t);Marionette.View.extend({tagName:"td",template:_.template('\n        <select>\n            <option value="">--SELECT--</option>\n            <%= getOptions() %>\n        </select>\n    '),events:{"change select":"onSelect"},templateContext:function(){var e=this;return{getOptions:function(){for(var t="",o=e.model.get("instances"),i=0;i<o.length;i++){t+='<option value="'+i+'">'+o[i].name.en+"</option>"}return t}}},onSelect:function(){var e=this.$el.find("select").val();e=parseInt(e,10);var t=this.model.get("instances")[e];this.triggerMethod("presetSelected",e,t)},onMaybeDeselect:function(e){var t=this.$el.find("select").val();if(""!=t){t=parseInt(t,10);var o=this.model.get("instances")[t].coordinates;for(var i in o){var n=o[i];if(e.findWhere({tag:i}).get("value")!=n){this.$el.find("option:selected").prop("selected",!1);break}}}},onAttach:function(){jQuery("<td>Variable Font Presets</td>").insertBefore(this.$el)},onRender:function(){var e=this.getOption("selected_index");void 0!==e&&this.$el.find('option[value="'+e+'"]').prop("selected",!0)}});var n,a=Marionette.View.extend({template:_.template('\n        <span><%= getName() %></span>\n        <input data-type="<%= tag %>" value="<%= getValue() %>" type="range" id="start" name="volume" min="<%= minValue %>" max="<%= maxValue %>" />\n    '),templateContext:function(){var e=this;return{getValue:function(){return void 0!==e.model.get("value")?e.model.get("value"):0},getName:function(){var t="";t=e.model.get("tag");var o=e.model.get("name");return null!==o&&"object"==i(o)&&_.has(o,"en")&&(t=o.en),t}}},className:"variable-font-slider",tagName:"div",events:{"input input":"onInput"},onInput:function(){var e=this.$el.find("input").val();this.model.set("value",e),this.triggerMethod("input:triggered",e)},onRender:function(){this.triggerMethod("input")}}),s=(Marionette.CompositeView.extend({template:_.template('\n    <div class="variable-font-headline">Variable Font Axes</div>\n    <div class="collection-container"></div>\n    '),className:"variable-font-slider-collection-view",tagName:"td",childViewContainer:".collection-container",childView:a,onRender:function(){this.$el.attr("colspan",2)},onChildviewInputTriggered:function(){var e="font-variation-settings: ",t=[];this.collection.each(function(e){var o=e.get("value");void 0===o&&(o=0),t.push('"'+e.get("tag")+'" '+o)}),e+=t.join(", "),e+=";",this.triggerMethod("fontAxesUpdated",e,this.collection)}}),{generate_variable_font_sliders:function(e){},setJSON:function(){}});function l(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var r=Marionette.View.extend((l(n={template:"#row-view",tagName:"tbody",regions:{variableFontsAxes:".variable-font-axes-region",variableFontsPresets:".variable-font-instances-region"},templateContext:function(){var e=this,t=this.model;return{showFormatName:function(){return t.get("formatname")},showFormatType:function(){return t.get("type")},showText:function(){switch(t.get("type")){case"Paragraph":case"Headline":case"Character":return"A heat dome will build over the Midwest and East by late week, sending temperatures soaring well above average:â€¦"}},getStyleDesktop:function(){return e.triggerMethod("get:style:desktop")},getStyleTablet:function(){return e.triggerMethod("get:style:tablet")},getStylePhone:function(){return e.triggerMethod("get:style:phone")},getSpaceBottomStyleDesktop:function(){if("Character"!=t.get("type")){var e=t.get("spacebottommu");return void 0===e&&(e="px"),String()+'style="height:'+t.get("spacebottom")+e+';"'}return String()+'style="height:0;"'},getSpaceTopStyleDesktop:function(){if("Character"!=t.get("type")){var e=t.get("spacetopmu");return void 0===e&&(e="px"),String()+'style="height:'+t.get("spacetop")+e+';"'}return String()+'style="height:0;"'},getSpaceBottomStylePhone:function(){if("Character"!=t.get("type")){var e=t.get("phone-spacebottom");void 0===e&&(e="20");var o=t.get("phone-spacebottommu");return void 0===o&&(o="px"),String()+'style="height:'+e+o+';"'}return String()+'style="height:0;"'},getSpaceTopStylePhone:function(){if("Character"!=t.get("type")){var e=t.get("phone-spacetop");void 0===e&&(e="0");var o=t.get("phone-spacetopmu");return void 0===o&&(o="px"),String()+'style="height:'+e+o+';"'}return String()+'style="height:0;"'},getSpaceBottomStyleTablet:function(){if("Character"!=t.get("type")){var e=t.get("tablet-spacebottom");void 0===e&&(e="20");var o=t.get("tablet-spacebottommu");return void 0===o&&(o="px"),String()+'style="height:'+e+o+';"'}return String()+'style="height:0;"'},getSpaceTopStyleTablet:function(){if("Character"!=t.get("type")){var e=t.get("tablet-spacetop");void 0===e&&(e="0");var o=t.get("tablet-spacetopmu");return void 0===o&&(o="px"),String()+'style="height:'+e+o+';"'}return String()+'style="height:0;"'}}},events:{"click .js-font-style-italic":"toggleItalic","click .js-font-style-underline":"toggleUnderline","click .js-font-style-border-bottom":"toggleBorderBottom","click .js-font-style-caps":"toggleCaps","click .js-delete-row":"deleteRow","change .font-size-mu":"updateFontMu","change .font-select":"updateFont","change .font-weight-select":"updateFontWeight","input .font-size":"updateFontSize","input .line-height":"updateLineHeight","change .line-height-mu":"updateLineHeightMu","input .letter-spacing":"updateLetterSpacing","input .space-bottom":"updateSpaceBottom","input .space-top":"updateSpaceTop","input .text-indent":"updateTextIndent","click .align-js":"updateTextAlign","input .phone-line-height":"phoneUpdateLineHeight","change .phone-line-height-mu":"phoneUpdateLineHeightMu","change .phone-font-size-mu":"phoneUpdateFontMu","input .phone-font-size":"phoneUpdateFontSize","input .phone-space-bottom":"phoneUpdateSpaceBottom","input .phone-space-top":"phoneUpdateSpaceTop","input .tablet-line-height":"tabletUpdateLineHeight","change .tablet-line-height-mu":"tabletUpdateLineHeightMu","change .tablet-font-size-mu":"tabletUpdateFontMu","input .tablet-font-size":"tabletUpdateFontSize","input .tablet-space-bottom":"tabletUpdateSpaceBottom","input .tablet-space-top":"tabletUpdateSpaceTop","change .space-bottom-mu":"updateSpaceBottomMu","change .space-top-mu":"updateSpaceTopMu","change .phone-space-bottom-mu":"phoneUpdateSpaceBottomMu","change .phone-space-top-mu":"phoneUpdateSpaceTopMu","change .tablet-space-bottom-mu":"tabletUpdateSpaceBottomMu","change .tablet-space-top-mu":"tabletUpdateSpaceTopMu"},updateLineHeightMu:function(e){var t=e.target.value;this.model.set("lineheightmu",t);var o=this.model.get("lineheight");formatslgPassedData.advancedLineHeights?this.$el.find(".js-desktop-style, .js-desktop-style p").css("line-height",o+t):this.$el.find(".js-style, .js-style p").css("line-height",o),y.updateJSON()},tabletUpdateLineHeightMu:function(e){var t=e.target.value;this.model.set("tablet-lineheightmu",t);var o=this.model.get("tablet-lineheight");void 0===o&&(o="1.2"),this.$el.find(".js-tablet-style, .js-tablet-style p").css("line-height",o+t),y.updateJSON()},phoneUpdateLineHeightMu:function(e){var t=e.target.value;this.model.set("phone-lineheightmu",t);var o=this.model.get("phone-lineheight");void 0===o&&(o="1.2"),this.$el.find(".js-phone-style, .js-phone-style p").css("line-height",o+t),FormatsManager.Entities.API.updateJSON()},updateLineHeight:function(e){var t=e.target.value;if(formatslgPassedData.advancedLineHeights){var o=this.model.get("lineheightmu");void 0===o&&(o=""),this.$el.find(".js-desktop-style, .js-desktop-style p").css("line-height",t+o)}else this.$el.find(".js-style, .js-style p").css("line-height",t);this.model.set("lineheight",t),y.updateJSON()},phoneUpdateLineHeight:function(e){var t=e.target.value,o=this.model.get("phone-lineheightmu");void 0===o&&(o=""),this.$el.find(".js-phone-style, .js-phone-style p").css("line-height",t+o),this.model.set("phone-lineheight",t),y.updateJSON()},tabletUpdateLineHeight:function(e){var t=e.target.value,o=this.model.get("tablet-lineheightmu");void 0===o&&(o=""),this.$el.find(".js-tablet-style, .js-tablet-style p").css("line-height",t+o),this.model.set("tablet-lineheight",t),y.updateJSON()},onGetStyleDesktop:function(e){var t="font-family:"+this.model.get("fontfamily")+";",o=this.model.get("fontsizemu");void 0===o&&(o="px");var i=this.model.get("textindent");void 0===i&&(i="0");var n=this.model.get("borderbottom");n=void 0!==n&&1==n?"border-bottom:1px solid;display:inline;":"";var a=this.model.get("italic");a=void 0!==a&&1==a?"font-style:italic;":"";var s=this.model.get("underline");s=void 0!==s&&1==s?"text-decoration:underline;":"";var l=this.model.get("caps");l=void 0!==l&&1==l?"text-transform:uppercase;":"";var r="";formatslgPassedData.advancedLineHeights&&(void 0===(r=this.model.get("lineheightmu"))&&(r=""));var p=String()+"font-size:"+this.model.get("fontsize")+o+";color:"+this.model.get("color")+";line-height:"+this.model.get("lineheight")+r+";letter-spacing:"+this.model.get("letterspacing")+"em;"+t+"text-align:"+this.model.get("textalign")+";font-weight:"+this.model.get("fontweight")+";text-indent:"+i+"em;"+n+a+s+l;return void 0!==e&&(p+=e),p},onGetStyleTablet:function(e){var t="font-family:"+this.model.get("fontfamily")+";",o=this.model.get("tablet-fontsizemu");void 0===o&&(o="px");var i=this.model.get("textindent");void 0===i&&(i="0");var n=this.model.get("tablet-fontsize");void 0===n&&(n="16");var a=this.model.get("borderbottom");a=void 0!==a&&1==a?"border-bottom:1px solid;display:inline;":"";var s=this.model.get("italic");s=void 0!==s&&1==s?"font-style:italic;":"";var l=this.model.get("underline");l=void 0!==l&&1==l?"text-decoration:underline;":"";var r=this.model.get("caps");r=void 0!==r&&1==r?"text-transform:uppercase;":"";var p="",d=this.model.get("lineheight");formatslgPassedData.advancedLineHeights&&(void 0===(p=this.model.get("tablet-lineheightmu"))&&(p=""),void 0===(d=this.model.get("tablet-lineheight"))&&(d="1.2"));var h=String()+"font-size:"+n+o+";color:"+this.model.get("color")+";line-height:"+d+p+";letter-spacing:"+this.model.get("letterspacing")+"em;"+t+"text-align:"+this.model.get("textalign")+";font-weight:"+this.model.get("fontweight")+";text-indent:"+i+"em;"+a+s+l+r;return void 0!==e&&(h+=e),h},onGetStylePhone:function(e){var t="font-family:"+this.model.get("fontfamily")+";",o=this.model.get("phone-fontsizemu");void 0===o&&(o="px");var i=this.model.get("textindent");void 0===i&&(i="0");var n=this.model.get("phone-fontsize");void 0===n&&(n="16");var a=this.model.get("borderbottom");a=void 0!==a&&1==a?"border-bottom:1px solid;display:inline;":"";var s=this.model.get("italic");s=void 0!==s&&1==s?"font-style:italic;":"";var l=this.model.get("underline");l=void 0!==l&&1==l?"text-decoration:underline;":"";var r=this.model.get("caps");r=void 0!==r&&1==r?"text-transform:uppercase;":"";var p="",d=this.model.get("lineheight");formatslgPassedData.advancedLineHeights&&(void 0===(p=this.model.get("phone-lineheightmu"))&&(p=""),void 0===(d=this.model.get("phone-lineheight"))&&(d="1.2"));var h=String()+"font-size:"+n+o+";color:"+this.model.get("color")+";line-height:"+d+p+";letter-spacing:"+this.model.get("letterspacing")+"em;"+t+"text-align:"+this.model.get("textalign")+";font-weight:"+this.model.get("fontweight")+";text-indent:"+i+"em;"+a+s+l+r;return void 0!==e&&(h+=e),h},toggleCaps:function(e){jQuery(e.currentTarget).toggleClass("active"),jQuery(e.currentTarget).hasClass("active")?(this.model.set("caps",!0),this.$el.find(".js-phone-style, .js-phone-style p, .js-tablet-style, .js-tablet-style p, .js-desktop-style, .js-desktop-style p").css("text-transform","uppercase")):(this.model.set("caps",!1),this.$el.find(".js-phone-style, .js-phone-style p, .js-tablet-style, .js-tablet-style p, .js-desktop-style, .js-desktop-style p").css("text-transform","")),y.updateJSON()},toggleBorderBottom:function(e){if(jQuery(e.currentTarget).toggleClass("active"),jQuery(e.currentTarget).hasClass("active")){var t=this.model.get("underline");void 0!==t&&1==t&&this.$el.find(".js-font-style-underline").click(),this.model.set("borderbottom",!0),this.$el.find(".js-phone-style, .js-phone-style p, .js-tablet-style, .js-tablet-style p, .js-desktop-style, .js-desktop-style p").css({"border-bottom":"1px solid",display:"inline"})}else this.model.set("borderbottom",!1),this.$el.find(".js-phone-style, .js-phone-style p, .js-tablet-style, .js-tablet-style p, .js-desktop-style, .js-desktop-style p").css({"border-bottom":"",display:""});y.updateJSON()},toggleUnderline:function(e){if(jQuery(e.currentTarget).toggleClass("active"),jQuery(e.currentTarget).hasClass("active")){var t=this.model.get("borderbottom");void 0!==t&&1==t&&this.$el.find(".js-font-style-border-bottom").click(),this.model.set("underline",!0),this.$el.find(".js-phone-style, .js-phone-style p, .js-tablet-style, .js-tablet-style p, .js-desktop-style, .js-desktop-style p").css("text-decoration","underline")}else this.model.set("underline",!1),this.$el.find(".js-phone-style, .js-phone-style p, .js-tablet-style, .js-tablet-style p, .js-desktop-style, .js-desktop-style p").css("text-decoration","");y.updateJSON()},toggleItalic:function(e){jQuery(e.currentTarget).toggleClass("active"),jQuery(e.currentTarget).hasClass("active")?(this.model.set("italic",!0),this.$el.find(".js-phone-style, .js-phone-style p, .js-tablet-style, .js-tablet-style p, .js-desktop-style, .js-desktop-style p").css("font-style","italic")):(this.model.set("italic",!1),this.$el.find(".js-phone-style, .js-phone-style p, .js-tablet-style, .js-tablet-style p, .js-desktop-style, .js-desktop-style p").css("font-style","")),y.updateJSON()},phoneUpdateFontSize:function(e){var t=e.target.value,o=this.model.get("phone-fontsizemu");void 0===o&&(o="px"),this.$el.find(".js-phone-style, .js-phone-style p").css("font-size",t+o),this.model.set("phone-fontsize",t),y.updateJSON()},tabletUpdateFontSize:function(e){var t=e.target.value,o=this.model.get("tablet-fontsizemu");void 0===o&&(o="px"),this.$el.find(".js-tablet-style, .js-tablet-style p").css("font-size",t+o),this.model.set("tablet-fontsize",t),y.updateJSON()},updateFontSize:function(e){var t=e.target.value,o=this.model.get("fontsizemu");void 0===o&&(o="px"),this.$el.find(".js-desktop-style, .js-desktop-style p").css("font-size",t+o),this.model.set("fontsize",t),y.updateJSON()},phoneUpdateFontMu:function(e){var t=e.target.value;this.model.set("phone-fontsizemu",t);var o="vw"==t?4:16;this.model.set("phone-fontsize",o),this.$el.find(".js-phone-style, .js-phone-style p").css("font-size",o+t),this.$el.find(".phone-font-size").val(o),y.updateJSON()},tabletUpdateFontMu:function(e){var t=e.target.value;this.model.set("tablet-fontsizemu",t);var o="vw"==t?4:16;this.model.set("tablet-fontsize",o),this.$el.find(".js-tablet-style, .js-tablet-style p").css("font-size",o+t),this.$el.find(".tablet-font-size").val(o),y.updateJSON()},updateFontMu:function(e){var t=e.target.value;this.model.set("fontsizemu",t);var o="vw"==t?4:16;this.model.set("fontsize",o),this.$el.find(".js-desktop-style, .js-desktop-style p").css("font-size",o+t),this.$el.find(".font-size").val(o),y.updateJSON()},updateTextAlign:function(e){var t=jQuery(e.currentTarget),o=t.attr("data-align");jQuery("button.align-js").removeClass("active"),t.addClass("active"),this.$el.find(".js-style, .js-style p").css("text-align",o),this.model.set("textalign",o),y.updateJSON()},updateSpaceBottom:function(e){var t=e.target.value,o=this.model.get("spacebottommu");void 0===o&&(o="px"),this.$el.find(".js-desktop-spacebottom").css("height",t+o),this.model.set("spacebottom",t),y.updateJSON()},updateSpaceBottomMu:function(e){var t=e.target.value;this.model.set("spacebottommu",t);var o=this.model.get("spacebottom");this.$el.find(".js-desktop-spacebottom").css("height",o+t),y.updateJSON()},updateSpaceTop:function(e){var t=e.target.value,o=this.model.get("spacetopmu");void 0===o&&(o="px"),this.$el.find(".js-desktop-spacetop").css("height",t+o),this.model.set("spacetop",t),y.updateJSON()},updateSpaceTopMu:function(e){var t=e.target.value;this.model.set("spacetopmu",t);var o=this.model.get("spacetop");this.$el.find(".js-desktop-spacetop").css("height",o+t),y.updateJSON()},phoneUpdateSpaceBottom:function(e){var t=e.target.value,o=this.model.get("phone-spacebottommu");void 0===o&&(o="px"),this.$el.find(".js-phone-spacebottom").css("height",t+o),this.model.set("phone-spacebottom",t),y.updateJSON()},phoneUpdateSpaceBottomMu:function(e){var t=e.target.value;this.model.set("phone-spacebottommu",t);var o=this.model.get("phone-spacebottom");this.$el.find(".js-phone-spacebottom").css("height",o+t),y.updateJSON()},phoneUpdateSpaceTop:function(e){var t=e.target.value,o=this.model.get("phone-spacetopmu");void 0===o&&(o="px"),this.$el.find(".js-phone-spacetop").css("height",t+o),this.model.set("phone-spacetop",t),y.updateJSON()},tabletUpdateSpaceTopMu:function(e){var t=e.target.value;this.model.set("tablet-spacetopmu",t);var o=this.model.get("tablet-spacetop");this.$el.find(".js-tablet-spacetop").css("height",o+t),y.updateJSON()},tabletUpdateSpaceBottom:function(e){var t=e.target.value,o=this.model.get("tablet-spacebottommu");void 0===o&&(o="px"),this.$el.find(".js-tablet-spacebottom").css("height",t+o),this.model.set("tablet-spacebottom",t),y.updateJSON()},tabletUpdateSpaceBottomMu:function(e){var t=e.target.value;this.model.set("tablet-spacebottommu",t);var o=this.model.get("tablet-spacebottom");this.$el.find(".js-tablet-spacebottom").css("height",o+t),y.updateJSON()},tabletUpdateSpaceTop:function(e){var t=e.target.value,o=this.model.get("tablet-spacetopmu");void 0===o&&(o="px"),this.$el.find(".js-tablet-spacetop").css("height",t+o),this.model.set("tablet-spacetop",t),y.updateJSON()}},"tabletUpdateSpaceTopMu",function(e){var t=e.target.value;this.model.set("tablet-spacetopmu",t);var o=this.model.get("tablet-spacetop");this.$el.find(".js-tablet-spacetop").css("height",o+t),y.updateJSON()}),l(n,"updateFont",function(e){var t=e.target.value;this.$el.find(".js-style, .js-style p").css("font-family",t),this.model.set("fontfamily",t),this.getRegion("variableFontsAxes").empty(),this.getRegion("variableFontsPresets").empty(),this.$el.find(".variable-font-instances-region").html(""),this.model.unset("variablesettings"),this.model.unset("variable-preset-index"),this.generateVariableFontSliders(),y.updateJSON()}),l(n,"updateFontWeight",function(e){var t=e.target.value;this.$el.find(".js-style, .js-style p").css("font-weight",t),this.model.set("fontweight",t),y.updateJSON()}),l(n,"updateLetterSpacing",function(e){var t=e.target.value;this.$el.find(".js-style, .js-style p").css("letter-spacing",t+"em"),this.model.set("letterspacing",t),y.updateJSON()}),l(n,"updateTextIndent",function(e){var t=e.target.value;this.$el.find(".js-style, .js-style p").css("text-indent",t+"em"),this.model.set("textindent",t),y.updateJSON()}),l(n,"updateColor",function(e){this.$el.find(".js-style, .js-style p").css("color",e),this.model.set("color",e),y.updateJSON(),this.updatePreviewBgColor()}),l(n,"deleteRow",function(e){e.preventDefault(),c.deleteFontRow(this.model)}),l(n,"onRender",function(){c.setInputAttrs(this.$el,this.model);var e=this,t=this.$el.find(".colorpicker");jQuery(t[0]).iris({hide:!0,palettes:["#000","#fff","#f00","#0f0","#00f","#ff0","#0ff","#f0f"],change:function(t,o){e.updateColor(o.color.toString())}}),e.updatePreviewBgColor(),e.generateVariableFontSliders()}),l(n,"generateVariableFontSliders",function(){s.generate_variable_font_sliders(this)}),l(n,"onChildviewPresetSelected",function(e,t){var o=this.getRegion("variableFontsAxes").currentView;for(var i in t.coordinates){o.collection.findWhere({tag:i}).set("value",t.coordinates[i])}o.render(),this.model.set("variable-preset-index",e),y.updateJSON()}),l(n,"onChildviewFontAxesUpdated",function(e,t){this.triggerMethod("maybe:deselect:preset"),this.model.set("variablesettings",t.toJSON()),y.updateJSON(),this.$el.find(".js-desktop-style").attr("style",this.triggerMethod("get:style:desktop",e)),this.$el.find(".js-tablet-style").attr("style",this.triggerMethod("get:style:tablet",e)),this.$el.find(".js-phone-style").attr("style",this.triggerMethod("get:style:phone",e))}),l(n,"onMaybeDeselectPreset",function(){var e=this.getRegion("variableFontsAxes").currentView,t=this.getRegion("variableFontsPresets").currentView;void 0!==t&&t.triggerMethod("maybe:deselect",e.collection)}),l(n,"updatePreviewBgColor",function(){"#ffffff"==this.model.get("color")?this.$el.find(".format-preview-wrap").css("background-color","rgb(235, 235, 235)"):this.$el.find(".format-preview-wrap").css("background-color","")}),n)),p=Marionette.CompositeView.extend({tagName:"div",template:"#row-composite-view",childViewContainer:".js-formats-table",childView:r,events:{"click .js-add-format":"addFormat"},addFormat:function(e){e.preventDefault(),c.insertRow()}});function d(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var h={rowsView:null},c={initRows:function(e){v(e)},getRowsView:function(){return h.rowsView},insertRow:function(e){u(e)},deleteFontRow:function(e){m(e)},setInputAttrs:function(e,t){g(e,t)}},g=function(e,t){var o=t.get("lineheight");e.find(".line-height").val(o);var i=t.get("lineheightmu");void 0!==i&&e.find('.line-height-mu option[value="'+i+'"]').attr("selected","selected");var n=t.get("tablet-lineheight");void 0!==n&&e.find(".tablet-line-height").val(n);var a=t.get("tablet-lineheightmu");void 0!==a&&e.find('.tablet-line-height-mu option[value="'+a+'"]').attr("selected","selected");var s=t.get("phone-lineheight");void 0!==s&&e.find(".phone-line-height").val(s);var l=t.get("phone-lineheightmu");void 0!==l&&e.find('.phone-line-height-mu option[value="'+l+'"]').attr("selected","selected");var r=t.get("fontsizemu");void 0===r&&(r="px"),e.find('.font-size-mu option[value="'+r+'"]').attr("selected","selected");var p=t.get("phone-fontsizemu");void 0===p&&(p="px"),e.find('.phone-font-size-mu option[value="'+p+'"]').attr("selected","selected");var d=t.get("tablet-fontsizemu");void 0===d&&(d="px"),e.find('.tablet-font-size-mu option[value="'+d+'"]').attr("selected","selected");var h=t.get("fontsize");e.find(".font-size").val(h);var c=t.get("phone-fontsize");void 0===c&&(c="16"),e.find(".phone-font-size").val(c);var g=t.get("tablet-fontsize");void 0===g&&(g="16"),e.find(".tablet-font-size").val(g),h=t.get("color"),e.find(".colorpicker").val(h),h=t.get("letterspacing"),e.find(".letter-spacing").val(h),h=t.get("spacebottom"),e.find(".space-bottom").val(h),h=t.get("spacetop"),e.find(".space-top").val(h);var u=t.get("phone-spacetop");void 0===u&&(u="0"),e.find(".phone-space-top").val(u);var m=t.get("phone-spacebottom");void 0===m&&(m="20"),e.find(".phone-space-bottom").val(m);var v=t.get("tablet-spacetop");void 0===v&&(v="0"),e.find(".tablet-space-top").val(v);var f=t.get("tablet-spacebottom");void 0===f&&(f="20"),e.find(".tablet-space-bottom").val(f);var b=t.get("textindent");void 0!==b&&e.find(".text-indent").val(b);var y=t.get("textalign");void 0!==y&&(e.find(".text-align-row button").removeClass("active"),e.find('.text-align-row button[data-align="'+y+'"]').addClass("active"));var j=t.get("fontweight");"normal"!=j&&void 0!==j||(j="400"),e.find('.font-weight-select option[value="'+j+'"]').attr("selected","selected"),h=t.get("fontfamily"),e.find('.font-select option[value="'+h+'"]').length&&e.find('.font-select option[value="'+h+'"]').attr("selected","selected");var S=t.get("borderbottom");void 0!==S&&1==S&&e.find(".js-font-style-border-bottom").addClass("active");var x=t.get("italic");void 0!==x&&1==x&&e.find(".js-font-style-italic").addClass("active");var w=t.get("underline");void 0!==w&&1==w&&e.find(".js-font-style-underline").addClass("active");var z=t.get("caps");void 0!==z&&1==z&&e.find(".js-font-style-caps").addClass("active");var O=t.get("spacebottommu");void 0===O&&(O="px"),e.find('.space-bottom-mu option[value="'+O+'"]').attr("selected","selected");var $=t.get("spacetopmu");void 0===$&&($="px"),e.find('.space-top-mu option[value="'+$+'"]').attr("selected","selected");var N=t.get("phone-spacebottommu");void 0===N&&(N="px"),e.find('.phone-space-bottom-mu option[value="'+N+'"]').attr("selected","selected");var M=t.get("phone-spacetopmu");void 0===M&&(M="px"),e.find('.phone-space-top-mu option[value="'+M+'"]').attr("selected","selected");var k=t.get("tablet-spacebottommu");void 0===k&&(k="px"),e.find('.tablet-space-bottom-mu option[value="'+k+'"]').attr("selected","selected");var J=t.get("tablet-spacetopmu");void 0===J&&(J="px"),e.find('.tablet-space-top-mu option[value="'+J+'"]').attr("selected","selected")},u=function(){var e=jQuery(".js-format-name-input").val(),t=jQuery(".js-format-type").val();jQuery(".js-format-name-input").val("").removeClass("parsley-success"),jQuery(".js-add-format").attr("disabled","disabled");var o=jQuery(".js-copy-formats").val(),i=null;""==o?i=new Backbone.Model({formatname:e,type:t,fontfamily:"helvetica,sans-serif",fontsize:"16",fontsizemu:"px",fontweight:"400",color:"#000",lineheight:"1.2",lineheightmu:"",letterspacing:"0",spacebottom:"20",spacebottommu:"px",spacetop:"0",spacetopmu:"px",textalign:"left","text-indent":"0","phone-lineheight":"1.2","phone-lineheightmu":"","phone-spacetop":"0","phone-spacetopmu":"px","phone-spacebottom":"20","phone-spacebottommu":"px","phone-fontsize":"16","phone-fontsizemu":"px","tablet-lineheight":"1.2","tablet-lineheightmu":"","tablet-spacetop":"0","tablet-spacetopmu":"px","tablet-spacebottom":"20","tablet-spacebottommu":"px","tablet-fontsize":"16","tablet-fontsizemu":"px",italic:!1,underline:!1,borderbottom:!1,caps:!1}):h.rowsView.collection.each(function(n){if(n.get("formatname")==o){var a,s=n.get("phone-spacetop");void 0===s&&(s=n.get("spacetop"));var l=n.get("phone-spacebottom");void 0===l&&(l=n.get("spacebottom"));var r=n.get("phone-fontsize");void 0===r&&(r="16");var p=n.get("phone-fontsizemu");void 0===p&&(p="px");var h=n.get("tablet-spacetop");void 0===h&&(h=n.get("spacetop"));var c=n.get("tablet-spacebottom");void 0===c&&(c=n.get("spacebottom"));var g=n.get("tablet-fontsize");void 0===g&&(g="16");var u=n.get("tablet-fontsizemu");void 0===u&&(u="px");var m=n.get("textindent");void 0===m&&(m=0);var v=n.get("fontsizemu");void 0===v&&(v="px");var f=n.get("spacebottommu");void 0===f&&(f="px");var b=n.get("spacetopmu");void 0===b&&(b="px");var y=n.get("phone-spacebottommu");void 0===y&&(y="px");var j=n.get("phone-spacetopmu");void 0===j&&(j="px");var S=n.get("tablet-spacebottommu");void 0===S&&(S="px");var x=n.get("tablet-spacetopmu");void 0===x&&(x="px");var w=n.get("caps");void 0===w&&(w=!1);var z=n.get("underline");void 0===z&&(z=!1);var O=n.get("borderbottom");void 0===O&&(O=!1);var $=n.get("italic");void 0===$&&($=!1);var N=n.get("lineheightmu");void 0===N&&(N="");var M=n.get("tablet-lineheight");void 0===N&&(M="1.2");var k=n.get("tablet-lineheightmu");void 0===k&&(k="");var J=n.get("phone-lineheight");void 0===J&&(J="1.2");var C=n.get("phone-lineheightmu");void 0===C&&(C=""),i=new Backbone.Model((d(a={formatname:e,type:t,fontfamily:n.get("fontfamily"),fontsize:n.get("fontsize"),fontsizemu:v,fontweight:n.get("fontweight"),color:n.get("color"),lineheight:n.get("lineheight"),lineheightmu:N},"lineheight",n.get("lineheight")),d(a,"letterspacing",n.get("letterspacing")),d(a,"spacebottom",n.get("spacebottom")),d(a,"spacebottommu",f),d(a,"spacetop",n.get("spacetop")),d(a,"spacetopmu",b),d(a,"textalign",n.get("textalign")),d(a,"text-indent",m),d(a,"phone-lineheight",J),d(a,"phone-lineheightmu",C),d(a,"phone-spacetop",s),d(a,"phone-spacetopmu",j),d(a,"phone-spacebottom",l),d(a,"phone-spacebottommu",y),d(a,"phone-fontsize",r),d(a,"phone-fontsizemu",p),d(a,"tablet-lineheight",M),d(a,"tablet-lineheightmu",k),d(a,"tablet-spacetop",h),d(a,"tablet-spacetopmu",x),d(a,"tablet-spacebottom",c),d(a,"tablet-spacebottommu",S),d(a,"tablet-fontsize",g),d(a,"tablet-fontsizemu",u),d(a,"italic",$),d(a,"underline",z),d(a,"borderbottom",O),d(a,"caps",w),a))}}),h.rowsView.collection.add(i),y.updateJSON(),jQuery('[data-toggle="tooltip"]').tooltip({container:"#formatsmanager"})},m=function(e){h.rowsView.collection.remove(e),y.updateJSON()},v=function(e){h.rowsView=new p({collection:e}),f()},f=function(){},b={jsonObject:null},y={getRowsEntities:function(){return j()},updateJSON:function(){x()},getJSON:function(){S()},getJSONObject:function(){return b.jsonObject},getFontsJSONObject:function(){return w()}},j=function(){var e=[];return null!=b.jsonObject&&(e=b.jsonObject),new Backbone.Collection(e)},S=function(){var e=jQuery.trim(jQuery("#formatsmanager_json").val());if(void 0!==e&&""!=e){var t=JSON.parse(e);b.jsonObject=t}},x=function(){var e=c.getRowsView().collection.toJSON(),t=window.JSON.stringify(e,void 0,2);jQuery("#formatsmanager_json").val(t)},w=function(){var e=jQuery.trim(jQuery("#fontmanager_json").val());if(void 0!==e&&""!=e)return JSON.parse(e)},z={showManager:function(e){O(e)}},O=function(e){s.setJSON(),y.getJSON();var t=y.getRowsEntities();c.initRows(t);var o=c.getRowsView();e.showView(o),window.ParsleyValidator.addValidator("isother",function(e,t){var o=!0;return jQuery(".js-format-name").each(function(){jQuery(this).text()==e&&(o=!1)}),o},32).addMessage("en","isother","This name is already used."),jQuery.listen("parsley:field:error",function(e){arrErrorMsg=ParsleyUI.getErrorsMessages(e),errorMsg=arrErrorMsg.join(";"),e.$element.popover("destroy").popover({container:"body",placement:"bottom",content:errorMsg}).popover("show")}),jQuery.listen("parsley:field:success",function(e){e.$element.popover("destroy")}),jQuery(".js-format-name-input").on("input propertychange",function(){1==jQuery(this).parsley().validate()?jQuery(".js-add-format").removeAttr("disabled"):jQuery(".js-add-format").attr("disabled","disabled")}),jQuery('[data-toggle="tooltip"]').tooltip({container:"#formatsmanager"})};(new(Marionette.Application.extend({region:"#formatsmanager",onStart:function(){z.showManager(this)}}))).start()}]);